<html lang='en'>

<head>
  <meta charset='utf-8' />
  <title>Discord OAUTH</title>
  <style>
    * {
      text-align: center;
      margin: 0px auto;
    }

    #welcome_txt {
      font-size: 24px;
    }

    #login-link {
      background-color: whitesmoke;
      border-radius: 8px;
      color: black;
      padding: 15px 30px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 20px;
    }

    #login-link:hover {
      cursor: pointer;
    }
  </style>
</head>

<body>
  <br>
  <a id='login-link'
    href='https://discord.com/api/oauth2/authorize?client_id=967841618436694036&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fauth&response_type=code&scope=identify'>Login
    with Discord</a><br><br>
  <p id='message'></p>
  <span style="display: none" id="token"></span>

  <script>
    function setCookie(name, value, days) {
      var expires = "";
      if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toUTCString();
      }
      document.cookie = name + "=" + (value || "") + expires + "; path=/";
    }
    function getCookie(name) {
      var nameEQ = name + "=";
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
          if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    }
    function eraseCookie(name) {
      document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
    }

    const token = document.querySelector("span#token").textContent;
    if (token && getCookie("token") != token) {
      setCookie("token", token, 10);
    }
  </script>
</body>

</html>
